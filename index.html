<h2>rproc</h2>

<p>Kind of howto couchapp showing the implementation
of <em>external</em> R calls with a <em>_show</em> like url.</p>

<p>R-functions and R-scripts are intended stored in the database;</p>

<p>rproc.R gets them at the first time (and on demand
using the url- param <em>ctrl=reload</em>)</p>

<h2>config</h2>

<ul>
<li><p>Put the following 4 lines in your <em>local.ini</em></p>

<p>[external]</p>

<p>rproc= Rscript  path/to/thiscouchapp/_attachments/rproc.R</p>

<p>[httpd<em>db</em>handlers]</p>

<p><em>rproc = {couch</em>httpd<em>external, handle</em>external_req, &lt;&lt;"rproc">>}</p></li>
<li><p>restart couchdb</p></li>
</ul>

<h2>usage</h2>

<p>I like to use this in the following manner</p>

<ul>
<li>client initiates a  GET http://server:5984/db/<em>rproc/doc</em>id?script=scriptname</li>
<li>rproc.R gets provides the document with the doc_id</li>
<li>scriptname.R runs the analysis process on the data stored in the document</li>
<li>rproc.R updates the document</li>
<li>GET- Request is answered with the new revision of the document</li>
</ul>
